### 上帝之眼 API  文档

**读者对象**

本文档(本指南)主要适用于以下工程师: 

- 软件工程师
- 技术支持工程师


#### 1. API 列表

Method|Path|Content|
---|---|---|
POST|/company/faceview_events|Create One FaceViewEvent|
GET|/company/faceview_events|List All FaceViewEvents by query condition|
GET|/company/faceview_events/{event_id}|List One FaceViewEvent|
GET|/company/faceview_reports|List Report of FaceViewEvents|



#### 2. 功能介绍


**2.1 创建事件**

Method|Path|Content|
---|---|---|
POST|/company/faceview_events|Create One FaceViewEvent|

请求体：

```json

{
    "track_id": "", // string  事件轨迹id
    "capture_at": "", // time.Time 捕获头像时间
    "leave_at": "", // time.Time 断开捕获头像时间
    "age": "", // int  预测年龄
    "gender": "", // int  预测性别，0 女 1 男
    "attention_rate": "", // string 关注度
    "mac_address": "", // string 设备编号
    "avatar": "" // File 人脸头像
  }

```


响应：

```json

{
  "age": 0, // 年龄
  "attention_rate": "string", // 关注度
  "capture_at": "string", // 捕获时间
  "company_id": 0, // 公司 
  "create_at": "string", // 创建记录时间
  "delete_at": "string", // 删除记录时间
  "device_id": 0, // 设备 id
  "face_url": "string", // 人脸地址
  "gender": 0, // 性别
  "id": 0, // 事件 id
  "leave_at": "string", // 断开捕获时间
  "retention": 0, // 关注度
  "track_id": "string", // 事件轨迹 id
  "update_at": "string" // 记录更新时间
}
```


**2.2 获取所有事件**

Method|Path|Content|
---|---|---|
GET|/company/faceview_events|List All FaceViewEvents by query condition|

请求参数：


```json
{
"return": "" // all_list or all_return 
}

```

```json
{
"gender": "" // 0 or 1 
}

```

```json
{
"attention": "" // 关注度
}

```

```json
{
"stay": "" // 停留时间
}

```

响应：

```json
[
  {
    "age": 0,  // 年龄
    "attention_rate": "string", // 关注度
    "capture_at": "string", // 捕获时间
    "company_id": 0, // 公司 ID
    "create_at": "string", // 创建记录时间
    "delete_at": "string", // 删除记录时间
    "device_id": 0, // 设备ID
    "face_url": "string", // 人脸头像地址
    "gender": 0, // 性别
    "id": 0, // 事件id
    "leave_at": "string", // 离开屏幕时间
    "retention": 0, // 停留时间
    "track_id": "string", // 事件轨迹 id
    "update_at": "string" // 更新记录时间
  }
]

```


**2.3 获取单个事件**

Method|Path|Content|
---|---|---|
GET|/company/faceview_events/{event_id}|List One FaceViewEvent|

请求参数：

```json
{
   "event_id":"" //  事件id
}
```

响应：

```json
{
  "age": 0,
  "attention_rate": "string",
  "capture_at": "string",
  "company_id": 0,
  "create_at": "string",
  "delete_at": "string",
  "device_id": 0,
  "face_url": "string",
  "gender": 0,
  "id": 0,
  "leave_at": "string",
  "retention": 0,
  "track_id": "string",
  "update_at": "string"
}


```

**2.4 获取统计报表**

Method|Path|Content|
---|---|---|
GET|/company/faceview_reports|List Report of FaceViewEvents|


请求参数：

```json
{
"return":"" // all_list or all_count
}
```

响应：

```json

{
   "data":{
      "age_count": {
         "age": "" // 年龄对应的统计数值
      },
      "avg_stay_time": "", // 平均停留时间
      "company_id": "", // 公司 id
      "device_id":"", // 设备 id
      "face_view_count": "", // 所有事件数目
      "female_count": "", // 女性数目
      "male_count":"", // 男性数目
      "hour": "", // 时间
      "id": "" // id 
   }
}

```